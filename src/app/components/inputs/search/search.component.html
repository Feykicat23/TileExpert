<div class="search-container">
  <input
    type="text"
    class="search-input"
    [class.active]="searchOpen"
    [(ngModel)]="searchText"
    (focus)="openMenu()"
    (keydown.enter)="performSearch()"
    placeholder="Поисковый запрос"
  />
  <button class="search-btn" (click)="toggleSearch(true)">
    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g clip-path="url(#clip0_3_1723)">
        <path
          d="M24.5 22H23.71L23.43 21.73C24.41 20.59 25 19.11 25 17.5C25 13.91 22.09 11 18.5 11C14.91 11 12 13.91 12 17.5C12 21.09 14.91 24 18.5 24C20.11 24 21.59 23.41 22.73 22.43L23 22.71V23.5L28 28.49L29.49 27L24.5 22ZM18.5 22C16.01 22 14 19.99 14 17.5C14 15.01 16.01 13 18.5 13C20.99 13 23 15.01 23 17.5C23 19.99 20.99 22 18.5 22Z"
          fill="white"/>
      </g>
      <defs>
        <clipPath id="clip0_3_1723">
          <rect width="24" height="24" fill="white" transform="translate(8 8)"/>
        </clipPath>
      </defs>
    </svg>
  </button>

  <div *ngIf="menuOpen" class="search-menu">
    <div style="position: relative; display: flex; width: 100%">
      <div class="left-part">
        <div class="">
          <div class="title-list">
            <p class="history">История</p>
          </div>
          <div class="history-list">
            <ul>
              <li *ngFor="let li of historyList">
                <span>{{ li.label }} </span>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="right-part">

        <div class="input-container">
          <label for="input" class="author-label">Автор</label>
          <input id="input" type="text" placeholder="Имя и должность" class="custom-input"/>
        </div>

        <div class="checkbox-container">
          <div class="checkbox-item" *ngFor="let checkbox of SEARCH_OPTIONS">
            <input type="checkbox" id="{{checkbox.id}}" class="custom-checkbox">
            <label for="{{checkbox.id}}">{{ checkbox.label }}</label>
          </div>
        </div>

        <div>
          <span>Только</span>
          <div class="checkbox-container" style="max-width: 351px">
            <div class="checkbox-item" *ngFor="let checkbox of ONLY_OPTIONS">
              <input type="checkbox" id="{{checkbox.id}}" class="custom-checkbox">
              <label for="{{checkbox.id}}">{{ checkbox.label }}</label>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

</div>


<style lang="scss">
  .search-container {
    position: relative;
    display: flex;
    align-items: center;

    .search-input {
      right: 10px;
      position: absolute;
      width: 0;
      visibility: hidden;
      padding: 14px 0;
      border: none;
      outline: none;
      border-bottom: 2px solid #ccc;
      max-width: 672px;
      border-radius: 4px;

      &::placeholder {
        color: #9aa1a6;
      }

      transition: .8s ease-in-out;


      &.active {
        visibility: visible;
        display: block;
        z-index: 99;
        max-width: 672px;
        width: 65vw;
        padding: 14px 16px;
      }

      @media (max-width: 1040px) {
        &.active {
          max-width: calc(100vw - 360px);
        }
      }
    }

    .search-btn {
      background: none;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;

      @media (max-width: 970px) {
        padding: 0;
      }

      svg {
        fill: #333;
        transition: transform 0.3s ease;
      }

      &:hover svg {
        transform: scale(1.1);
      }
    }

    .search-menu {
      display: flex;
      background: #fff;
      position: absolute;
      right: 10px;
      top: 45px;
      width: 100vw;
      max-width: 704px;
      border-radius: 4px;
      box-shadow: 0 8px 16px 0 rgba(93, 95, 97, 0.14), 0 4px 8px 0 rgba(93, 95, 97, 0.14);
      height: 228px;

      @media (max-width: 1040px) {
        max-width: calc(100vw - 328px);
      }

      .left-part {
        position: relative;
        z-index: 999;
        height: 100%;
        min-width: 216px;
        border-right: 1px solid #E1E4E6;

        .title-list {
          box-sizing: border-box;
          border-bottom: 6px solid #d99;
          padding: 20px 16px 0;

          p {
            font-weight: 500;
            font-size: 11px;
            line-height: 127%;
            letter-spacing: 0em;
            color: #7f878c;
            margin: 0;
          }
        }

        .history-list {
          max-height: 200px;
          overflow-y: auto;
        }

        .history-list::-webkit-scrollbar {
          width: 0px;
          height: 0px;
        }

        .history-list::after {
          content: '';
          position: absolute;
          bottom: 0;
          left: 0;
          width: 100%;
          height: 50px;
          background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 1));
          pointer-events: none;
          border-radius: 6px;
        }

        ul {
          margin: 0;
          padding: 0;
          list-style: none;

          li {
            font-family: var(--font-family);
            padding: 6px 16px;
            font-weight: 400;
            font-size: 14px;
            line-height: 143%;
            letter-spacing: 0em;
            color: #2a3033;
          }
        }
      }

      .right-part {
        width: 100%;
        padding: 24px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;

        .input-container {
          position: relative; /* Для позиционирования надписи */
          max-width: 439px;
          height: 46px;
        }

        .author-label {
          position: absolute;
          top: -12px;
          left: 12px;
          font-size: 14px;
          font-weight: bold;
          background-color: white;
          padding-right: 10px;
          padding-left: 5px;
          color: #8C9499;
        }

        .custom-input {
          border: 1px solid #e1e4e6;
          border-radius: 4px;
          padding-block: 0;
          padding-inline: 0;
          padding-left: 16px;
          width: 100%;
          height: 100%;
          font-size: 14px;
          box-sizing: border-box;

          input {
            max-width: 424px;
          }
        }

        .custom-input:focus {
          outline: none; /* Убираем стандартный фокусный стиль */
          border-color: #4a90e2; /* Синий цвет для фокуса */
        }

        .checkbox-container {
          display: flex;
          justify-content: space-between;
          gap: 10px; /* Отступ между чекбоксами */
        }

        .checkbox-item {
          display: flex;
          height: 36px;
          align-items: center;
          gap: 12px;

          @media (max-width: 1040px) {
            gap: 4px;
          }
        }

        .custom-checkbox {
          appearance: none; /* Убираем стандартный стиль чекбокса */
          width: 18px; /* Размер чекбокса */
          height: 18px; /* Размер чекбокса */
          border: 2px solid #7F878C; /* Граница чекбокса */
          border-radius: 4px; /* Радиус углов */
          cursor: pointer;
          position: relative;
        }

        .custom-checkbox:checked {
          background-color: #4a90e2; /* Цвет заполнения при выборе */
          border-color: #4a90e2; /* Цвет границы при выборе */
        }

        .custom-checkbox:checked::after {
          content: ''; /* Добавляем галочку */
          position: absolute;
          top: 1px;
          left: 5px;
          width: 5px;
          height: 10px;
          border: solid white;
          border-width: 0 2px 2px 0;
          transform: rotate(45deg);
        }

        label {
          font-size: 14px;
          font-weight: 400;
          color: #4a4a4a; /* Цвет текста */
          cursor: pointer; /* Указатель на текст */
        }

        span {
          font-size: 14px;
          color: #000;
        };
      }
    }
  }

</style>
